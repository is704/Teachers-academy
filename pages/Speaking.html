<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุงุฑุฉ ุงูุชุญุฏุซ - ุฃูุงุฏูููุฉ ุงูุฃุณุงุชุฐุฉ</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .skill-page {
            padding: 80px 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .skill-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .skill-header h1 {
            font-size: 2.5rem;
            color: #4f46e5;
            margin-bottom: 20px;
        }
        
        .skill-level {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .exercises-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .exercise-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .exercise-card:hover {
            transform: translateY(-5px);
        }
        
        .exercise-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        
        .record-btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #4f46e5;
            text-align: center;
            margin: 20px 0;
        }
        
        .back-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            color: #4f46e5;
            border: 2px solid #4f46e5;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- ุฒุฑ ุงูุนูุฏุฉ -->
    <a href="../index.html" class="back-btn">
        <i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ
    </a>

    <div class="skill-page">
        <div class="container">
            <!-- ุงูุนููุงู ุงูุฑุฆูุณู -->
            <div class="skill-header">
                <div class="skill-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <i class="fas fa-microphone-alt"></i>
                </div>
                <h1>ููุงุฑุฉ ุงูุชุญุฏุซ ูุงูุฅููุงุก</h1>
                <p class="subtitle">ุทูุฑ ูุฏุฑุงุชู ูู ุงูุชูุงุตู ูุงูุชุนุจูุฑ ุจุทูุงูุฉ ูุซูุฉ</p>
            </div>

            <!-- ุงุฎุชุจุงุฑ ุงููุณุชูู -->
            <div class="skill-level">
                <h2><i class="fas fa-chart-line"></i> ุงุฎุชุจุงุฑ ูุณุชูุงู ุงูุญุงูู</h2>
                <div class="level-test">
                    <p>ุฃุฌุจ ุนูู ูุฐู ุงูุฃุณุฆูุฉ ูุชุญุฏูุฏ ูุณุชูุงู:</p>
                    <div class="questions">
                        <div class="question">
                            <p>1. ูู ุชุดุนุฑ ุจุงูุชูุชุฑ ุนูุฏ ุงูุชุญุฏุซ ุฃูุงู ูุฌููุนุฉุ</p>
                            <div class="options">
                                <button class="option-btn" data-level="1">ุฏุงุฆูุงู</button>
                                <button class="option-btn" data-level="2">ุฃุญูุงูุงู</button>
                                <button class="option-btn" data-level="3">ูุงุฏุฑุงู</button>
                                <button class="option-btn" data-level="4">ุฃุจุฏุงู</button>
                            </div>
                        </div>
                        <!-- ูููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃุณุฆูุฉ -->
                    </div>
                    <button id="calculateLevel" class="btn primary">ุงุญุณุจ ูุณุชูุงู</button>
                    <div id="levelResult" style="display: none; margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 10px;"></div>
                </div>
            </div>

            <!-- ุงูุชูุงุฑูู ุงูุนูููุฉ -->
            <div class="exercises-section">
                <h2><i class="fas fa-dumbbell"></i> ุชูุงุฑูู ุนูููุฉ</h2>
                <div class="exercises-grid">
                    
                    <!-- ุชูุฑูู 1: ุงูุชุณุฌูู ุงูุตูุชู -->
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <h3>ุงูุชุณุฌูู ุงูุตูุชู</h3>
                        <p>ุณุฌู ุตูุชู ูุฃูุช ุชุดุฑุญ ุฏุฑุณุงูุ ุซู ุงุณุชูุน ููุชุณุฌูู ูุญูู ุฃุฏุงุกู</p>
                        <div class="timer" id="recordingTimer">02:00</div>
                        <button class="record-btn" id="recordBtn">
                            <i class="fas fa-circle"></i> ุงุจุฏุฃ ุงูุชุณุฌูู
                        </button>
                        <div id="recordingStatus" style="margin-top: 10px; color: #666;"></div>
                    </div>

                    <!-- ุชูุฑูู 2: ุงูุชุญุฏุซ ุฃูุงู ุงููุฑุขุฉ -->
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>ุงูุชุญุฏุซ ุฃูุงู ุงููุฑุขุฉ</h3>
                        <p>ุชูุฑู ุนูู ุงูุดุฑุญ ุฃูุงู ุงููุฑุขุฉ ูุฑุงูุจ ูุบุฉ ุฌุณุฏู ูุชุนุจูุฑุงุช ูุฌูู</p>
                        <ul>
                            <li>๐ก ุงุฎุชุฑ ููุถูุนุงู ุชุนููููุงู</li>
                            <li>โฑ๏ธ ุชุญุฏุซ ููุฏุฉ 3 ุฏูุงุฆู</li>
                            <li>๐ ูุงุญุธ ููุงุท ุงูููุฉ ูุงูุถุนู</li>
                        </ul>
                        <button class="btn primary start-mirror">ุงุจุฏุฃ ุงูุชูุฑูู</button>
                    </div>

                    <!-- ุชูุฑูู 3: ุงููุฑุงุกุฉ ุจุตูุช ุนุงูู -->
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-volume-up"></i>
                        </div>
                        <h3>ุงููุฑุงุกุฉ ุงูุฌูุฑูุฉ</h3>
                        <p>ุงูุฑุฃ ุงููุต ุงูุชุงูู ุจุตูุช ูุงุถุญ ูุน ุงูุชุฑููุฒ ุนูู ุงููุทู ุงูุตุญูุญ:</p>
                        <div class="reading-text">
                            <p>"ุงูุชุนููู ููุณ ููุก ุฏููุ ุจู ุฅุดุนุงู ุดุนูุฉ. ุงููุนูู ุงููุงุฌุญ ูู ูู ูููู ุทูุงุจู ููุจุญุซ ูุงููุนุฑูุฉุ ูุง ูู ูุญุดู ุฃุฐูุงููู ุจุงููุนูููุงุช."</p>
                        </div>
                        <button class="btn secondary read-aloud">ุงูุฑุฃ ุงูุขู</button>
                    </div>

                    <!-- ุชูุฑูู 4: ุงูุชูุฎูุต ุงูุดููู -->
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-comment-alt"></i>
                        </div>
                        <h3>ุงูุชูุฎูุต ุงูุดููู</h3>
                        <p>ุงุณุชูุน ููููุทุน ุซู ูุฎุตู ุดูููุงู ุจูููุงุชู:</p>
                        <audio controls style="width: 100%; margin: 10px 0;">
                            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
                            ุงููุชุตูุญ ูุง ูุฏุนู ุชุดุบูู ุงูุตูุช
                        </audio>
                        <button class="btn primary start-summary">ุงุจุฏุฃ ุงูุชูุฎูุต</button>
                    </div>

                </div>
            </div>

            <!-- ูุตุงุฆุญ ุณุฑูุนุฉ -->
            <div class="quick-tips" style="margin-top: 50px; background: white; padding: 30px; border-radius: 15px;">
                <h2><i class="fas fa-lightbulb"></i> ูุตุงุฆุญ ุณุฑูุนุฉ ููุชุญุณูู</h2>
                <div class="tips-grid">
                    <div class="tip">
                        <i class="fas fa-volume-up" style="color: #4f46e5;"></i>
                        <h4>ุชุญุณูู ุงููุทู</h4>
                        <p>ุชุฏุฑุจ ุนูู ุงููููุงุช ุงูุตุนุจุฉ ุจุจุทุก ุซู ุฒุฏ ุงูุณุฑุนุฉ ุชุฏุฑูุฌูุงู</p>
                    </div>
                    <div class="tip">
                        <i class="fas fa-hand-peace" style="color: #10b981;"></i>
                        <h4>ูุบุฉ ุงูุฌุณุฏ</h4>
                        <p>ุงุณุชุฎุฏู ุฅููุงุกุงุช ุงููุฏูู ูุชุนุจูุฑุงุช ุงููุฌู ุงูููุงุณุจุฉ</p>
                    </div>
                    <div class="tip">
                        <i class="fas fa-pause-circle" style="color: #f59e0b;"></i>
                        <h4>ุงูุชููู ุงููุคูุช</h4>
                        <p>ุฎุฐ ูููุงุช ูุตูุฑุฉ ูุฌุฐุจ ุงูุงูุชุจุงู ูุฅุนุทุงุก ููุช ููุชูููุฑ</p>
                    </div>
                    <div class="tip">
                        <i class="fas fa-smile" style="color: #ef4444;"></i>
                        <h4>ุงูุงุจุชุณุงูุฉ</h4>
                        <p>ุงูุงุจุชุณุงูุฉ ุชุฒูุฏ ุงูุซูุฉ ูุชุฌุนู ุงููุณุชูุนูู ุฃูุซุฑ ุชูุงุนูุงู</p>
                    </div>
                </div>
            </div>

            <!-- ุงูุชูุฏู -->
            <div class="progress-section" style="margin-top: 50px;">
                <h2><i class="fas fa-chart-line"></i> ุชูุฏูู ูู ููุงุฑุฉ ุงูุชุญุฏุซ</h2>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%;"></div>
                </div>
                <p>ุฃููู 3 ุชูุงุฑูู ุฃุฎุฑู ูุชุฑุชูู ูููุณุชูู ุงูุชุงูู!</p>
                <button class="btn primary" onclick="saveProgress()">ุญูุธ ุงูุชูุฏู</button>
            </div>

        </div>
    </div>

    <script>
        // ุชุณุฌูู ุงูุตูุช
        let mediaRecorder;
        let audioChunks = [];
        
        document.getElementById('recordBtn').addEventListener('click', async function() {
            const btn = this;
            const timer = document.getElementById('recordingTimer');
            const status = document.getElementById('recordingStatus');
            
            if (btn.innerHTML.includes('ุงุจุฏุฃ')) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    
                    mediaRecorder.ondataavailable = event => {
                        audioChunks.push(event.data);
                    };
                    
                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        
                        // ููุง ูููู ุฑูุน ุงูููู ููุฎุงุฏู ุฃู ุญูุธู ูุญููุงู
                        status.innerHTML = `โ ุชู ุงูุชุณุฌูู! <a href="${audioUrl}" download="ุชุณุฌููู.wav">ุญููู ุงูุชุณุฌูู</a>`;
                        status.style.color = 'green';
                        
                        // ุญูุธ ุงูุชูุฏู
                        localStorage.setItem('speaking_exercise_1', 'completed');
                        updateProgress();
                    };
                    
                    // ุจุฏุก ุงูุชุณุฌูู
                    mediaRecorder.start();
                    btn.innerHTML = '<i class="fas fa-stop"></i> ุฃููู ุงูุชุณุฌูู';
                    status.innerHTML = '๐ค ุฌุงุฑู ุงูุชุณุฌูู...';
                    status.style.color = 'blue';
                    
                    // ุนุฏูุงุฏ ุชูุงุฒูู
                    let timeLeft = 120;
                    const countdown = setInterval(() => {
                        const minutes = Math.floor(timeLeft / 60);
                        const seconds = timeLeft % 60;
                        timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        
                        if (timeLeft <= 0) {
                            clearInterval(countdown);
                            mediaRecorder.stop();
                            btn.innerHTML = '<i class="fas fa-circle"></i> ุงุจุฏุฃ ุงูุชุณุฌูู';
                        }
                        timeLeft--;
                    }, 1000);
                    
                } catch (err) {
                    status.innerHTML = 'โ ุฎุทุฃ ูู ุงููุตูู ูููููุฑูููู';
                    status.style.color = 'red';
                }
            } else {
                mediaRecorder.stop();
                btn.innerHTML = '<i class="fas fa-circle"></i> ุงุจุฏุฃ ุงูุชุณุฌูู';
            }
        });
        
        // ุงุฎุชุจุงุฑ ุงููุณุชูู
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                this.style.background = '#4f46e5';
                this.style.color = 'white';
            });
        });
        
        document.getElementById('calculateLevel').addEventListener('click', function() {
            const selected = document.querySelector('.option-btn.selected');
            if (selected) {
                const level = selected.dataset.level;
                const levels = {
                    '1': 'ูุจุชุฏุฆ - ุชุญุชุงุฌ ูููุงุฑุณุฉ ุฃูุซุฑ',
                    '2': 'ูุชูุณุท - ูุฏูู ุฃุณุงุณ ุฌูุฏ',
                    '3': 'ูุชูุฏู - ููุชุงุฒ!',
                    '4': 'ูุชููุฒ - ููููู ุชุฏุฑูุจ ุงูุขุฎุฑูู'
                };
                
                document.getElementById('levelResult').innerHTML = `
                    <h4>๐ฏ ูุณุชูุงู: ${level}/4</h4>
                    <p>${levels[level]}</p>
                    <p>ููุตู ุจู 3 ุชูุงุฑูู ุฃุณุจูุนูุงู ููุชุญุณูู</p>
                `;
                document.getElementById('levelResult').style.display = 'block';
            }
        });
        
        // ุงูุชูุฏู
        function updateProgress() {
            const progressFill = document.querySelector('.progress-fill');
            const completed = Object.keys(localStorage).filter(key => key.includes('speaking_exercise')).length;
            const progress = (completed / 10) * 100;
            progressFill.style.width = `${progress}%`;
        }
        
        function saveProgress() {
            localStorage.setItem('speaking_last_practice', new Date().toISOString());
            alert('โ ุชู ุญูุธ ุชูุฏูู!');
            updateProgress();
        }
        
        // ุชููุฆุฉ ุนูุฏ ุงูุชุญููู
        document.addEventListener('DOMContentLoaded', updateProgress);
    </script>
</body>
</html>
